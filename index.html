<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpaceRift - 3D –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è RPG –∏–≥—Ä–∞</title>
    
    <!-- GitHub Pages —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å -->
    <base href="./">
    
    <!-- Telegram WebApp -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- THREE.js CDN -->
    <script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/game.css">
    
    <!-- Favicon -->
    <link rel="icon" href="./favicon.ico">
</head>
<body>
    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>SpaceRift</h2>
            <p>–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è...</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div id="game-container" style="display: none;">
        <!-- 3D Canvas -->
        <canvas id="game-canvas"></canvas>
        
        <!-- HUD (Head-Up Display) -->
        <div id="hud">
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
            <div class="hud-top">
                <div class="hud-left">
                    <div class="stat">
                        <span class="stat-label">–£—Ä–æ–≤–µ–Ω—å:</span>
                        <span class="stat-value" id="level">1</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">–û–ø—ã—Ç:</span>
                        <span class="stat-value" id="experience">0/100</span>
                    </div>
                </div>
                
                <div class="hud-center">
                    <h1 class="game-title">SpaceRift</h1>
                </div>
                
                <div class="hud-right">
                    <div class="stat">
                        <span class="stat-label">–ö—Ä–µ–¥–∏—Ç—ã:</span>
                        <span class="stat-value" id="credits">1000</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">–≠–Ω–µ—Ä–≥–∏—è:</span>
                        <span class="stat-value" id="energy">100/100</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <div id="controls">
            <button class="control-btn" id="thrust-btn" title="–£—Å–∫–æ—Ä–µ–Ω–∏–µ (W)">
                <span>–£–°–ö–û–†</span>
            </button>
            <button class="control-btn" id="brake-btn" title="–¢–æ—Ä–º–æ–∂–µ–Ω–∏–µ (S)">
                <span>–¢–û–†–ú–û–ó</span>
            </button>
            <button class="control-btn" id="left-btn" title="–ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ (A)">
                <span>‚Üê</span>
            </button>
            <button class="control-btn" id="right-btn" title="–ü–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ (D)">
                <span>‚Üí</span>
            </button>
            <button class="control-btn" id="shoot-btn" title="–í—ã—Å—Ç—Ä–µ–ª (SPACE)">
                <span>–û–ì–û–ù–¨</span>
            </button>
        </div>
        
        <!-- –ú–∏–Ω–∏-–∫–∞—Ä—Ç–∞ -->
        <div id="minimap">
            <canvas id="minimap-canvas"></canvas>
        </div>
        
        <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
        <div id="inventory">
            <h3>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
            <div class="inventory-slots" id="inventory-slots">
                <!-- –°–ª–æ—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu" class="modal">
        <div class="modal-content">
            <h2>SpaceRift</h2>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ—Å–º–∏—á–µ—Å–∫—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é!</p>
            <button class="menu-btn" id="start-game">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            <button class="menu-btn" id="open-inventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
            <button class="menu-btn" id="open-shop">–ú–∞–≥–∞–∑–∏–Ω</button>
            <button class="menu-btn" id="open-stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        </div>
    </div>
    
    <!-- –ú–∞–≥–∞–∑–∏–Ω -->
    <div id="shop-modal" class="modal">
        <div class="modal-content">
            <h3>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –º–∞–≥–∞–∑–∏–Ω</h3>
            <div class="shop-items">
                <div class="shop-item" data-item="ship_hull_1">
                    <h4>–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–æ—Ä–ø—É—Å Mk I</h4>
                    <p>–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –∫–æ—Ä–∞–±–ª—è –Ω–∞ 20%</p>
                    <span class="price">500 –∫—Ä–µ–¥–∏—Ç–æ–≤</span>
                    <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
                </div>
                <div class="shop-item" data-item="weapon_laser_1">
                    <h4>–õ–∞–∑–µ—Ä–Ω–∞—è –ø—É—à–∫–∞ Mk I</h4>
                    <p>–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É—Ä–æ–Ω –Ω–∞ 25%</p>
                    <span class="price">750 –∫—Ä–µ–¥–∏—Ç–æ–≤</span>
                    <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
                </div>
                <div class="shop-item" data-item="engine_boost_1">
                    <h4>–£—Å–∫–æ—Ä–∏—Ç–µ–ª—å –¥–≤–∏–≥–∞—Ç–µ–ª—è</h4>
                    <p>–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 15%</p>
                    <span class="price">400 –∫—Ä–µ–¥–∏—Ç–æ–≤</span>
                    <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
                </div>
            </div>
            <button class="close-btn" id="close-shop">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="./scripts/telegram-webapp.js"></script>
    <script src="./scripts/game.js"></script>
    <script src="./scripts/main.js"></script>
    <script src="./scripts/ui.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script>
        // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ DOM –∏ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É...');
            setTimeout(async () => {
                try {
                    if (typeof SpaceRift !== 'undefined') {
                        window.spacerift = new SpaceRift();
                        await window.spacerift.start();
                        console.log('‚úÖ SpaceRift —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                    } else {
                        console.error('‚ùå SpaceRift –∫–ª–∞—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    }
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ SpaceRift:', error);
                }
            }, 200);
        });
    </script>
</body>
</html>